<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PES/EMB Viewer</title>
  <link rel="stylesheet" href="sidepanel.css">
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <span class="logo-icon">ğŸ§µ</span>
        <span class="logo-text">PES Viewer</span>
      </div>
      <div class="header-buttons">
        <div class="server-status-wrapper">
          <button id="serverStatus" class="btn-status" title="Server status">â“˜</button>
          <div id="serverInfo" class="server-info" style="display: none;">
            <div class="server-info-title">Server Location</div>
            <div class="server-info-path" id="serverPath">Loading...</div>
            <button id="copyServerPath" class="btn-copy-path">Copy Path</button>
          </div>
        </div>
        <button id="settingsBtn" class="btn-settings" title="CÃ i Ä‘áº·t">
          âš™ï¸
        </button>
      </div>
    </header>

    <!-- Settings Panel (hidden by default) -->
    <div id="settingsPanel" class="settings-panel" style="display: none;">
      <div class="setting-group">
        <label for="apiKeyInput">API Key:</label>
        <input
          type="password"
          id="apiKeyInput"
          class="setting-input"
          placeholder="Nháº­p Google API Key"
        >
      </div>
      <div class="setting-group">
        <label>Folders (má»—i dÃ²ng 1 folder ID hoáº·c URL):</label>
        <textarea
          id="foldersInput"
          class="setting-input folders-textarea"
          placeholder="Paste link hoáº·c ID folder, má»—i dÃ²ng 1 folder"
          rows="4"
        ></textarea>
      </div>
      <button id="saveSettingsBtn" class="btn-save">LÆ°u cÃ i Ä‘áº·t</button>
    </div>

    <!-- Search Bar -->
    <div class="search-container">
      <div class="search-wrapper">
        <input
          type="text"
          id="searchInput"
          class="search-input"
          placeholder="TÃ¬m kiáº¿m file..."
          autocomplete="off"
        >
        <div id="searchSuggestions" class="search-suggestions"></div>
      </div>
      <button id="searchBtn" class="btn-search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="11" cy="11" r="8"></circle>
          <path d="M21 21l-4.35-4.35"></path>
        </svg>
      </button>
    </div>

    <!-- Stats -->
    <div class="stats">
      <span id="fileCount">Found: 0 files</span>
      <button id="refreshBtn" class="btn-refresh" title="Refresh">ğŸ”„</button>
    </div>

    <!-- File Grid -->
    <div id="fileGrid" class="file-grid">
      <!-- Files will be rendered here -->
    </div>

    <!-- Loading Indicator -->
    <div id="loadingIndicator" class="loading" style="display: none;">
      <div class="spinner"></div>
      <span>Äang táº£i...</span>
    </div>

    <!-- Empty State -->
    <div id="emptyState" class="empty-state" style="display: none;">
      <div class="empty-icon">ğŸ“</div>
      <p>Nháº­p tá»« khÃ³a Ä‘á»ƒ tÃ¬m file PES/EMB</p>
    </div>

    <!-- Config Required -->
    <div id="configRequired" class="config-required">
      <div class="config-icon">âš™ï¸</div>
      <h3>Cáº¥u hÃ¬nh láº§n Ä‘áº§u</h3>
      <p>Nháº¥n nÃºt âš™ï¸ á»Ÿ gÃ³c trÃªn Ä‘á»ƒ cÃ i Ä‘áº·t:</p>
      <ul>
        <li>API Key tá»« Google Cloud</li>
        <li>Link folder Google Drive</li>
      </ul>
    </div>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast">
    <span id="toastMessage">Link Ä‘Ã£ Ä‘Æ°á»£c copy!</span>
  </div>

  <!-- Preview Modal -->
  <div id="previewModal" class="preview-modal" style="display: none;">
    <div class="preview-content">
      <button id="closePreview" class="preview-close">&times;</button>
      <div id="previewContainer" class="preview-container">
        <div class="preview-loading">
          <div class="spinner"></div>
          <span>Äang táº£i...</span>
        </div>
      </div>
      <div id="previewInfo" class="preview-info"></div>
    </div>
  </div>

  <script src="js/drive-api.js"></script>
  <script src="js/pes-parser.js"></script>
  <script src="sidepanel.js"></script>
</body>
</html>
